{{define "redirect_page.html"}}
<!DOCTYPE html>
<html lang="en" charset="utf-8">
<head>
<meta charset="utf-8">
<meta http-equiv="refresh" content="0; URL='{{.Redirect}}'"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Redirect page</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

<style>
  body {
    height: 100vh;
  }
  .redirect-box {
    margin: 1.25rem auto;
    max-width: 600px;
  }
  .redirect-page {
    font-size: 6rem;
    font-weight: 600;
  }
  #more-info.card {
    border: 1px solid #f0f0f0;
  }
  footer a {
    text-decoration: underline;
  }
</style>
</head>
<body class="has-background-light">
<section class="section">
  <div class="box block redirect-box has-text-centered">
    <div class="redirect-page">Login Redirect</div>

    <div id="more-info" class="block card is-fullwidth is-shadowless">
      <header class="card-header is-shadowless">
        <p class="card-header-title">If you are not redirected, then click in Redirect button.</p>
      </header>
    </div>

    {{ if .Redirect }}
    <hr>

    <div class="columns">
      <div class="column">
        <form method="GET" action="{{.Redirect}}">
          <button type="submit" class="button is-danger is-fullwidth">Redirect</button>
        </form>
      </div>
      <div class="column">
        <form method="GET" action="{{.ProxyPrefix}}/sign_in">
          <input type="hidden" name="rd" value="{{.Redirect}}">
          <button type="submit" class="button is-primary is-fullwidth">Sign in</button>
        </form>
      </div>
    </div>
    {{ end }}

  </div>
</section>

<footer class="footer has-text-grey has-background-light is-size-7">
  <div class="content has-text-centered">
    {{ if eq .Footer "-" }}
    {{ else if eq .Footer ""}}
    <p>Secured with <a href="https://github.com/oauth2-proxy/oauth2-proxy#oauth2_proxy" class="has-text-grey">OAuth2 Proxy</a> version {{.Version}}</p>
    {{ else }}
    <p>{{.Footer}}</p>
    {{ end }}
  </div>
</footer>

</body>
</html>
{{end}}
